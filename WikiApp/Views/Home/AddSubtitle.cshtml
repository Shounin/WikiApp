@{
    ViewBag.Title = "Bæta við skjátexta";
}

<h2>@ViewBag.Title</h2>


<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css">

<script type="text/javascript" src="/Scripts/tabScript.js"></script>
<script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="../../Scripts/UploadSrt.js" type="text/javascript"></script>


<script type="text/jscript">
    //get file size
    function GetFileSize(fileid) {
        try {
            var fileSize = 0;
            //for IE
            if ($.browser.msie) {
                //before making an object of ActiveXObject,
                //please make sure ActiveX is enabled in your IE browser
                var objFSO = new ActiveXObject("Scripting.FileSystemObject"); var filePath = $("#" + fileid)[0].value;
                var objFile = objFSO.getFile(filePath);
                var fileSize = objFile.size; //size in kb
                fileSize = fileSize / 1048576; //size in mb
            }
                //for FF, Safari, Opeara and Others
            else {
                fileSize = $("#" + fileid)[0].files[0].size //size in kb
                fileSize = fileSize / 1048576; //size in mb
            }

            // alert("Uploaded File Size is" + fileSize + "MB");
            return fileSize;
        }
        catch (e) {
            alert("Error is :" + e);
        }
    }

    //get file path from client system
    function getNameFromPath(strFilepath) {

        var objRE = new RegExp(/([^\/\\]+)$/);
        var strName = objRE.exec(strFilepath);

        if (strName == null) {
            return null;
        }
        else {
            return strName[0];
        }

    }

    $("#btnSubmit").live("click", function () {

        if ($('#fileToUpload').val() == "") {
            $("#spanfile").html("Please upload file");
            return false;
        }
        else {
            return checkfile();
        }
    });

    function checkfile() {
        var file = getNameFromPath($("#fileToUpload").val());
        if (file != null) {
            var extension = file.substr((file.lastIndexOf('.') + 1));
            //  alert(extension);
            switch (extension) {
                case 'srt':

                    flag = true;
                    break;
                default:
                    flag = false;
            }
        }
        if (flag == false) {
            $("#spanfile").text("You can upload only srt extension file");
            return false;

        }
        else {
            var size = GetFileSize('fileToUpload');
            if (size > 3) {
                $("#spanfile").text("You can upload file up to 3 MB");
                return false;
            }
            else {
                $("#spanfile").text("");
            }
        }
    }
    $(function () {
        $("#fileToUpload").change(function () {
            checkfile();
        });
    });
</script>

<!-- SCRIPTA ER BUINN, KOÐI KEMUR NUNA-->

<div class="jumbotron">
    <form class="form-search">
        <input type="text" class="input-medium-search-query">
        <button type="submit" class="btn-primary">Leita</button>
    </form>
</div>

<h3 style="color:green">@ViewBag.Message</h3>
@using (Html.BeginForm("AddSubtitle", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary();
    
    <fieldset>
        <legend>Bæta við skrá</legend>
        <ol>
            <li class="lifile">
                <input type="file" id="fileToUpload" name="file" />
                <span class="field-validation-error" id="spanfile"></span>
            </li>
        </ol>
        <input type="submit" id="btnSubmit" value="Upload" />
    </fieldset>
}





<!-- ÞETTA VIRKAR EKKI, "AN EXPRESSION TREE MAY NOT CONTAIN A DYNAMIC OPERATION, ÉG ER LOST." HINSVEGAR VIRKAR
       AÐ SETJA INN SRT SKRÁ, VEIT EKKI HVERT HÚN FER EN HÚN SUBMITTAR && ÞAÐ MÁ EINGÖNGU VERA SRT ;)

    GERA REPLACE Á "ATMERKI" OG ACTUALLY ATMERKIÐ

       PASSA AÐ TAKA UT BIL A MILLI ATMERKI OG HTML TIL ÞESS AÐ ÞAÐ KOMI EKKI SYNTAX ERROR.
   <div class="form-group">
           ATMERKI Html.LabelFor(model => model.name, new { ATMERKIclass = "control-label col-md-2" })
           <div class="col-md-10">
               ATMERKI Html.EditorFor(model => model.name)
               ATMERKI Html.ValidationMessageFor(model => model.name)
           </div>
       </div>

       <div class="form-group">
           ATMERKI Html.LabelFor(model => model.category, new { ATMERKIclass = "control-label col-md-2" })

           <select class="form-control input-sm">
               <option value="Kvikmyndir">--Velja tegund--</option>
               <option value="Kvikmyndir">Barnaefni</option>
               <option value="Kvikmyndir">Drama</option>
               <option value="Kvikmyndir">Gamanmyndir</option>
               <option value="Kvikmyndir">Hryllingsmyndir</option>
               <option value="Kvikmyndir">Rómantík</option>
               <option value="Kvikmyndir">Spennumyndir</option>
               <option value="Kvikmyndir">Þættir</option>
               <option value="Kvikmyndir">Ævintýramyndir</option>
           </select>
       </div>

       <div class="form-group">
           ATMERKI Html.LabelFor(model => model.description, new { ATMERKI class = "control-label col-md-2" })
           <div class="col-md-10">
               ATMERKI Html.EditorFor(model => model.description)
               ATMERKI Html.ValidationMessageFor(model => model.description)
           </div>
       </div>
       -->
